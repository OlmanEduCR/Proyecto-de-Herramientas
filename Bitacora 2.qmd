---
title: "Bitacora  2"
author: Cristhian, Olman, Jose
format: pdf
editor: visual
---

## Integrantes

-Cristhian Jimenez Campos C33973

-Olman Camacho Jerez C31523

-Jose Manuel Alfaro Monge C30244

1- Identifique los siguientes puntos para los datos con los que realizará su proyecto:

## Datos

Descripción de la tabla de datos.

Caracteristicas de la tabla

Esta base de datos contiene registros de 4424 estudiantes, quienes serán clasificados de distintas maneras, desde estado civil hasta los cursos que están cursando, entre otros. La base de datos fue publicada en 2021 y presenta diversos factores, incluyendo variables relacionadas con los padres, para analizar si influyen en la vida académica del estudiante. Fue creada por Valentim Realinho, Mónica Vieira Martins, Jorge Machado y Luís Baptista, investigadores del Instituto Politécnico de Portalegre en Portugal, y descargada desde el enlace [link](https://archive.ics.uci.edu/dataset/697/predict+students+dropout+and+academic+success). Los datos corresponden al segundo semestre, aunque no se especifica el año.

Las variables están distribuidas en distintas categorías: variables relacionadas con la trayectoria académica, variables demográficas y variables socioeconómicas. Los tipos de datos incluyen variables reales, categóricas y enteras.

Poblacion de estudio:

Estudiantes matriculados en diferentes carreras de pregrado de una institucion de educacion superior.

Muestra observada.\
4,424 estudiantes.

Unidad estadística o individuos.\
Cada uno de los 4,424 estudiantes de educación superior durante determinados semestres.

Identificación de las variables de estudio.\
Las variables de estudio incluyen información sobre la trayectoria académica, datos demográficos y factores socioeconómicos de los estudiantes, así como su rendimiento académico al final del primer y segundo semestre. El problema se plantea como una tarea de clasificación en tres categorías: abandono, matriculado y graduado.

2- primeas 5 filas de la tabla de datos\

```{r}
library(dplyr)
library(ggplot2)
datos <- read.csv2("data.csv", sep = ";", header = TRUE, stringsAsFactors = FALSE)
head(datos, 5)
datos
```

La tabla se encuentra en formato tabular, esto se puede ver y tambien se comenta en la pagina de descarga

3- Resumen de 5 números de las variables cuantitativas y analizar el mismo.
```{r}
library(dplyr)
# Se seleciona las variables cuantitaticas
variables_cuantitativas <- select_if(datos, is.numeric)
# Calcular resumen de 5 números para cada variable
#'Vamos a usar sapply para aplicar la funcion fivenum a la base
#'el firenum es una funcion que nos ayuda a calcular el minimo y maximo, los Q1 y Q3, ademas de eso la mediana 
resumen_5_numeros <- sapply(variables_cuantitativas, fivenum)
#para no tener problema trasponemos a resumen_5_numeros
resumen_5_numeros <- t(resumen_5_numeros)
#'Para facilitar la lectura vamos a ponerle nosmbres claros a las columnas
colnames(resumen_5_numeros) <- c("Minimo","Q1","Mediana","Q3","Máximo")
print(resumen_5_numeros)

```
4- Hacer al menos un gráfico que describa la distribución para cada una de las variables cuantitativas. 

```{r}

#str(datos)
variables_cuantitativas <- names(select(datos, where(is.numeric)))

for (var in variables_cuantitativas){
  h <- ggplot(datos, aes_string(x=var))+
    geom_histogram(fill = "#66CDAA", color = "#79CDCD", bins = 30) +
     labs(title = paste("Histograma de", var), x = var, y = "Frecuencia") +
    theme_minimal()
  print(h)
}
  

```

\

5- Hacer al menos dos gráficos que describan la relación entre las variables.
```{r}
grafico_internacional_genero <- function(df, genero, internacional, pais) {
  df_plot <- df %>%
    mutate(
      genero = factor({{genero}}, levels = c(1, 0), labels = c("Hombres", "Mujeres")),
      tipo = factor({{internacional}}, levels = c(0, 1), labels = c("Nacional", "Internacional"))
    ) %>%
    group_by(genero, tipo) %>%
    summarise(Frecuencia = n(), .groups = "drop")
  
  ggplot(df_plot, aes(x = tipo, y = Frecuencia, fill = genero)) +
    geom_col(position = "dodge", width = 0.7) +
    geom_text(aes(label = Frecuencia),
              position = position_dodge(width = 0.7),
              vjust = -0.3, size = 3.5) +
    scale_fill_manual(values = c("steelblue", "darkorange")) +
    labs(
      title = "Distribución de Internacionales y Nacionales por Género",
      x = "Lugar de Procedencia",
      y = "Frecuencia",
      fill = "Género"
    ) +
    theme_minimal(base_size = 12) +
    theme(
      legend.position = "bottom",
      plot.title = element_text(face = "bold"),
      axis.text.x = element_text(angle = 0, hjust = 0.5)
    )
}
grafico_internacional_genero(datos, datos$Gender, datos$International, datos$Nacionality)
```

6- Hacer al menos un gráfico que muestre la distribución de las variables categóricas.

7- Identificar valores faltantes y posibles outliers.

```{r}
datos_faltantes <- datos %>% 
  filter(if_any(everything(),is.na))
datos_faltantes

datos %>% 
  summarise(
    across(
      where(is.numeric),
      ~sum(
        .<quantile(.,0.25,na.rm=TRUE)-1.5*IQR(.)|
        .>quantile(.,0.75,na.rm=TRUE)+1.5*IQR(.),na.rm = TRUE
        
      )
    )
  )#cantidad de outliners por variable

es_outlier <- function(x) {
  
  if(!is.numeric(x)) return(rep(FALSE,length(x)))
  q1 <- quantile(x,0.25,na.rm = TRUE)
  q3 <- quantile(x,0.75,na.rm = TRUE)
  
  resultado <- x<(q1-1.5*IQR(x,na.rm = TRUE))|
                x>(q3+1.5*IQR(x,na.rm = TRUE))
  return(resultado)
}

outliers <- as.data.frame(sapply(datos,es_outlier))
outliers

```


8- Investigar técnicas que permitan subsanar los valores perdidos y outliers.

9- Bibliografía
<https://www.maximaformacion.es/blog-dat/como-describir-tus-datos-en-r-paso-1/>

<https://rpubs.com/Elyn1017/Aunivariado_Vcuantitativas_CasoMedicos>

.data